(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=React;var n=e.n(t);class o extends n().Component{constructor(e){super(e),this.moveHappened=this.moveHappened.bind(this),this.buildCollapsedContent=this.buildCollapsedContent.bind(this),this.buildExpandedContent=this.buildExpandedContent.bind(this),this.closeExpander=this.closeExpander.bind(this),this.buttonClicked=this.buttonClicked.bind(this),this.state={selectedExpander:void 0}}componentDidMount(){}componentWillUnmount(){}moveHappened(e,t){e.invokeType}closeExpander(){this.setState({selectedExpander:void 0})}buttonClicked(e){return t=this,n=void 0,i=function*(){const t=new Map;let n=void 0===this.state.selectedExpander;this.setState({selectedExpander:e}),n&&(manywho.model.getOutcomes(this.expanderParentId,this.props.flowKey).forEach((e=>{t.set(e.developerName,e)})),t.has("onExpand")&&(yield manywho.component.onOutcome(t.get("onExpand"),null,this.props.flowKey)))},new((o=void 0)||(o=Promise))((function(e,a){function l(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(l,s)}d((i=i.apply(t,n||[])).next())}));var t,n,o,i}render(){manywho.model.getContainer(this.props.id,this.props.flowKey);let e,t=manywho.model.getChildren(this.props.id,this.props.flowKey),o=[];return t.forEach((t=>{var n;"GROUP"===t.containerType?(this.expandedWidth=(null===(n=t.attributes)||void 0===n?void 0:n.expandedWidth)||"20%",this.expanderParentId=t.id,e=this.state.selectedExpander?this.buildExpandedContent(t):this.buildCollapsedContent(t)):o.push(this.buildStandardContent(t,this.props.flowKey,!1))})),n().createElement("div",{className:"colcon",style:{width:"100%",height:"100%"},id:this.props.id},n().createElement("div",{className:"colcon-content"},o),e)}buildStandardContent(e,t,o=!0,i=!0){let a;const l=manywho.component.getByName("outcome");let s,d=null;if(e.label&&(d=n().createElement("h3",null,e.label)),o){const t=manywho.model.getOutcomes(e.id,this.props.flowKey);s=t&&t.map((e=>n().createElement(l,{id:e.id,flowKey:this.props.flowKey})))}if(manywho.model.isContainer(e)){const t=manywho.component.getByName("mw-"+e.containerType);let o=manywho.styling.getClasses(this.props.parentId,e.id,e.containerType,this.props.flowKey).join(" ");o+=" mw-container",void 0!==t&&(t.displayName="mw-"+e.containerType);let l=t?n().createElement(t,{id:e.id,flowKey:this.props.flowKey}):n().createElement("noscript",null);a=n().createElement("div",{className:o,id:this.props.id},i?d:void 0,l,s)}else{const t=manywho.component.getByName(e.componentType,this.props.flowKey);let o=manywho.styling.getClasses(this.props.parentId,e.id,e.componentType,this.props.flowKey).join(" ");!1!==e.isValid&&!1!==e.isValid||(o+=" has-error"),!1===e.isVisible&&(o+=" hidden"),o+=" form-group";let i=t?n().createElement(t,{id:e.id,flowKey:this.props.flowKey}):n().createElement("noscript",null);a=n().createElement("div",{className:o,id:e.id},i)}return a}buildCollapsedContent(e){let t=[];return manywho.model.getChildren(e.id,this.props.flowKey).forEach((e=>{var o,i;if(manywho.model.isContainer(e)){let a;a=(null===(o=e.attributes)||void 0===o?void 0:o.icon)?n().createElement("span",{className:"colcon-expander-button-icon glyphicon glyphicon-"+(null===(i=e.attributes)||void 0===i?void 0:i.icon)}):n().createElement("span",{className:"colcon-expander-button-icon"},e.developerName),t.push(n().createElement("div",{id:e.id,className:"colcon-expander-button",onClick:t=>{this.buttonClicked(e.id)},title:e.label||e.developerName},a))}})),n().createElement("div",{className:"colcon-expander"},n().createElement("div",{className:"colcon-expander-buttoncol"},t))}buildExpandedContent(e){let t=[],o=[],i=manywho.model.getChildren(this.expanderParentId,this.props.flowKey),a=[];for(let e of i)manywho.model.isContainer(e)||a.push(this.buildStandardContent(e,this.props.flowKey));manywho.model.getChildren(e.id,this.props.flowKey).forEach((e=>{if(manywho.model.isContainer(e)){let t="colcon-expander-tab";this.state.selectedExpander===e.id&&(t+=" colcon-expander-tab-selected");let i=n().createElement("span",{className:t,onClick:t=>{this.buttonClicked(e.id)}},e.label||e.developerName);o.push(i)}})),t.unshift(n().createElement("div",{className:"colcon-expander-button",onClick:e=>{this.closeExpander()},title:"Close"},n().createElement("span",{className:"colcon-expander-button-icon glyphicon glyphicon-remove-sign"})));let l={flexBasis:this.expandedWidth},s=manywho.model.getContainer(this.state.selectedExpander,this.props.flowKey),d=this.buildStandardContent(s,this.props.flowkey,!0,!1);return n().createElement("div",{className:"colcon-expander colcon-expander-open",style:l},n().createElement("div",{className:"colcon-expander-buttonrow"},t),n().createElement("div",{className:"colcon-expander-body"},a,n().createElement("div",{className:"colcon-expander-tabs"},o),n().createElement("div",{className:"colcon-expander-content"},d)))}}manywho.component.registerContainer("Collapse",o)})();